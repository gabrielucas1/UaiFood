# UAIFOOD — README

Descrição curta
---------------
UAIFOOD é uma API de pedidos para delivery. Suporta usuários (CLIENT e ADMIN), endereços, itens, categorias e pedidos com itens (OrderItem).


Visão geral
-----------
Componentes principais:
- Usuário (User): CLIENT ou ADMIN
- Endereço (Address): cada usuário tem 1 endereço
- Pedido (Order): contém 1 ou mais OrderItem
- Item (Item): produto disponível para compra
- Categoria (Category): agrupa itens
- OrderItem: tabela intermediária entre Order e Item (com quantidade)
- Enums: UserType (CLIENT, ADMIN) e PaymentMethod (ex.: CASH, CARD)

Modelos (exemplo resumido)
-------------------------
Exemplo simplificado do `schema.prisma` (apenas para referência):

model User {
  id        Int       @id @default(autoincrement())
  name      String
  phone     String
  password  String
  type      UserType
  address   Address?
  orders    Order[]
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
}

model Address {
  id        Int    @id @default(autoincrement())
  street    String
  number    String
  city      String
  state     String
  zipCode   String
  userId    Int    @unique
  user      User   @relation(fields: [userId], references: [id])
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum UserType {
  CLIENT
  ADMIN
}

// Adicione: Order, OrderItem, Item, Category, PaymentMethod conforme o diagrama UML

Stack tecnológica recomendada
-----------------------------
- Backend: Node.js + Express
- ORM: Prisma + PostgreSQL (ou MySQL / SQLite para testes)
- Autenticação: JWT
- Validação: Zod ou Joi
- Documentação: Swagger (swagger-ui-express)
- Testes (opcional): Jest / Supertest

Estrutura de pastas sugerida
---------------------------
uaifood/
├── src/
│   ├── controllers/
│   ├── services/
│   ├── repositories/
│   ├── models/
│   ├── routes/
│   ├── middlewares/
│   ├── prisma/       # cliente prisma custom (opcional)
│   └── index.js
├── prisma/
│   └── schema.prisma
├── package.json
└── .env

Pré-requisitos
--------------
- Node.js LTS (recomendado)
- npm
- (Opcional) PostgreSQL ou outro DB suportado

Instalação rápida
-----------------
Exemplo de comandos (PowerShell):

```powershell
mkdir uaifood
cd uaifood
npm init -y
npm install express prisma @prisma/client bcryptjs jsonwebtoken cors dotenv
npm install --save-dev nodemon
npx prisma init
```

Configurar Prisma e migrar o banco
---------------------------------
1. Edite `prisma/schema.prisma` com os modelos do projeto (User, Address, Item, Category, Order, OrderItem, enums).
2. Crie a migration e rode o banco:

```powershell
npx prisma migrate dev --name init
```

Scripts úteis (exemplo em `package.json`)
--------------------------------------
- "dev": "nodemon src/index.js"
- "start": "node src/index.js"

Rotas principais
-----------------
- POST /users — cadastro
- POST /auth/login — login (retorna JWT)
- GET /items — listar itens
- POST /items — criar item (ADMIN)
- PUT /items/:id — atualizar item (ADMIN)
- DELETE /items/:id — remover item (ADMIN)
- GET /categories — listar categorias
- POST /categories — criar categoria (ADMIN)
- POST /orders — criar pedido (CLIENT)
- GET /orders — listar pedidos (filtrar por usuário/admin)

Autenticação
------------
- Recomendo JWT (bearer token) com middleware que valida o token e injeta o usuário no request.
- Proteja endpoints administrativos com verificação do `User.type === 'ADMIN'`.

Documentação (Swagger)
---------------------
- Use `swagger-ui-express` para servir a documentação.
- Crie um `swagger.json` com as definições das rotas e modelos.

Ordem sugerida de desenvolvimento
---------------------------------
1. Inicializar projeto e configurar Prisma
2. Implementar modelos e migrations
3. Criar endpoints de usuário (cadastro e login)
4. Implementar autenticação JWT + middlewares
5. CRUD de Items e Categories (protegidos por role)
6. Implementar Orders e OrderItem
7. Testes e documentação com Swagger

Como testar
-----------
- Utilize Insomnia, Postman ou HTTPie para testar endpoints.
- Para rotas protegidas, recupere o token via login e envie no header `Authorization: Bearer <token>`.

Próximos passos e notas finais
-----------------------------
- Adicionar exemplos de requests/response no Swagger.
- Implementar validação de entrada (Zod/Joi).
- Suporte à paginação e buscas em endpoints públicos.

Se quiser, posso:
- Gerar um `package.json` inicial e `src/index.js` básico;
- Criar um `prisma/schema.prisma` completo com todos os modelos;
- Implementar as rotas iniciais (usuário, login, items) com autenticação.

---

Arquivo atualizado e organizado com instruções básicas para iniciar o desenvolvimento.